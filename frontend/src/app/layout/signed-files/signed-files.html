<div class="signed-file">
  <header>
    <p class="title">Signed Files</p>
    <small>View all digitally signed files</small>
  </header>

  <div class="card">
    <div class="card-main">
      <h2 class="card-title">All Signed Files</h2>

      <div class="inputBox">
        <lucide-icon name="Search" size="20"></lucide-icon>
        <input
          type="text"
          placeholder="Search File or Certificate..."
          [(ngModel)]="searchTerm"
          (input)="filterFiles()"
        />
      </div>
    </div>

    <div *ngIf="loading" class="loading">Loading signed files...</div>

    <table *ngIf="!loading && filteredFiles.length > 0">
  <thead>
    <tr>
      <th>File Name</th>
      <th>Certificate Used</th>
      <th>Signed Date</th>
      <th>Signed Time</th>
      <th>Status</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let file of filteredFiles">
      <td>{{ file.fileName }}</td>
      <td>{{ file.certificateUsed }}</td>
      <td>{{ file.signedAt | date: 'dd/MM/yyyy' }}</td>
      <td>{{ file.signedAt | date: 'shortTime' }}</td>
      <td>
        <span
          class="status"
          [ngClass]="{
            active: file.status === 'SIGNED',
            failed: file.status === 'FAILED'
          }"
        >
          {{ file.status }}
        </span>
      </td>
      <td>
        <button class="download" (click)="downloadFile(file)">
          Download
        </button>
      </td>
    </tr>
  </tbody>
</table>

    <div *ngIf="!loading && filteredFiles.length === 0" class="no-data">
      No signed files found.
    </div>
  </div>
</div>
